# 4.1 첫 번째 AITDD 프로젝트

## 학습 목표

이 장의 첫 AITDD 프로젝트를 통해 다음을 배우게 됩니다:

- AITDD 프로세스 전체 흐름 이해하기
- TODO 작성부터 구현 완료까지의 전체 단계 실습하기
- AI 지원과 인간 검토의 적절한 균형 경험하기
- 소규모 기능으로 AITDD의 효과 실감하기

## 프로젝트 선택 기준

### 첫 프로젝트에 적합한 특징

**구현 범위**:
- 30분~1시간 정도에 완성할 수 있는 소규모 기능
- 단일 책임을 가진 간단한 처리
- 외부 의존성이 적은 독립성 높은 기능

**기술적 복잡도**:
- 익숙한 기술 스택 사용
- 구현 방법을 상상할 수 있는 내용
- 디버깅이 상대적으로 쉬운 처리

**학습 효과**:
- AITDD의 각 단계를 경험할 수 있음
- 성공 경험을 얻기 쉬운 내용
- 나중에 확장 가능한 기반이 되는 기능

### 추천 프로젝트 예시

**1. 간단한 계산 기능**
```
예시: 세금 포함 가격 계산기
- 입력: 상품 가격, 세율
- 출력: 세금 포함 가격, 세액
- 처리: 기본적인 숫자 계산
```

**2. 데이터 변환 기능**
```
예시: CSV 데이터 형식 변환
- 입력: CSV 문자열
- 출력: JSON 형식 데이터
- 처리: 파싱과 변환 로직
```

**3. 검증 기능**
```
예시: 이메일 주소 검증
- 입력: 문자열
- 출력: 검증 결과(불린값)
- 처리: 정규표현식을 사용한 형식 검사
```

## 실습: 세금 포함 가격 계산기

이 예제에서는 세금 포함 가격 계산기 구현을 통해 AITDD 프로세스를 학습합니다.

### 단계 1: TODO 작성

프로젝트 내에 todo.md 파일을 생성하고 구현할 기능을 명확히 합니다.

```markdown
# TODO: 세금 포함 가격 계산기 구현

## 구현할 기능
- [ ] 상품 가격과 세율로부터 세금 포함 가격을 계산하는 함수
- [ ] 세액을 계산하는 함수
- [ ] 입력값 검증
- [ ] 에러 핸들링(음수값, null값 등)

## 완료 기준
- 정상적인 값으로 계산이 올바르게 작동함
- 비정상값에 대해 적절한 에러 핸들링이 됨
- 테스트 커버리지 100% 달성
```

**포인트**:
- 기능을 구체적으로 분해하기
- 완료 기준을 명확히 하기
- 30분~1시간에 완성할 수 있는 단위로 조정하기

### 단계 2: 사양 작성

TODO를 기반으로 AI와 협력하여 상세한 사양을 작성합니다.

**AI에게 보낼 프롬프트 예시**:
```
다음 TODO로부터 상세한 사양서를 작성해주세요:

[todo.md 내용 붙여넣기]

사양서에는 다음을 포함해주세요:
- 함수 시그니처(인자, 반환값)
- 입력값 제약
- 에러 조건과 대응
- 계산 로직의 상세
```

**기대되는 사양서(예시)**:
```markdown
# 세금 포함 가격 계산기 사양서

## 함수 사양

### calculateTaxIncludedPrice(price: number, taxRate: number): number
- 상품 가격과 세율로부터 세금 포함 가격을 계산
- 인자:
  - price: 상품 가격(0 이상의 숫자)
  - taxRate: 세율(0 이상 1 이하의 소수, 예: 0.1 = 10%)
- 반환값: 세금 포함 가격(소수점 첫째 자리에서 반올림)

### calculateTax(price: number, taxRate: number): number
- 세액을 계산
- 인자와 반환값은 위와 동일
- 반환값: 세액(소수점 첫째 자리에서 반올림)

## 에러 처리
- 음수 가격: Error("가격은 0 이상이어야 합니다")
- 세율이 범위 밖: Error("세율은 0 이상 1 이하여야 합니다")
- null/undefined: Error("유효한 숫자를 입력해주세요")
```

**인간 검토 체크포인트**:
- [ ] TODO의 의도가 올바르게 반영되었는가
- [ ] 함수의 책임 범위가 적절한가
- [ ] 에러 조건이 포괄적인가
- [ ] 구현 가능한 내용인가

### 단계 3: 테스트 케이스 작성

사양서를 기반으로 AI에게 테스트 케이스를 작성하게 합니다.

**AI에게 보낼 프롬프트 예시**:
```
다음 사양서에 기반하여 포괄적인 테스트 케이스를 작성해주세요:

[사양서 내용 붙여넣기]

다음 관점에서 테스트 케이스를 작성해주세요:
- 정상 케이스: 일반적인 값에서의 동작 확인
- 경계값: 0, 1 등의 경계에서의 동작 확인
- 비정상 케이스: 에러 조건의 동작 확인
- 테스트 프레임워크: Jest 사용
```

**생성된 테스트 케이스 예시**:
```typescript
import { calculateTaxIncludedPrice, calculateTax } from './taxCalculator';

describe('세금 포함 가격 계산기', () => {
  describe('calculateTaxIncludedPrice', () => {
    // 정상 케이스
    test('일반적인 세금 포함 가격 계산', () => {
      expect(calculateTaxIncludedPrice(1000, 0.1)).toBe(1100);
      expect(calculateTaxIncludedPrice(150, 0.08)).toBe(162);
    });

    // 경계값
    test('가격이 0인 경우', () => {
      expect(calculateTaxIncludedPrice(0, 0.1)).toBe(0);
    });

    test('세율이 0인 경우', () => {
      expect(calculateTaxIncludedPrice(1000, 0)).toBe(1000);
    });

    // 비정상 케이스
    test('음수 가격에서 에러', () => {
      expect(() => calculateTaxIncludedPrice(-100, 0.1))
        .toThrow('가격은 0 이상이어야 합니다');
    });

    test('세율이 범위 밖일 때 에러', () => {
      expect(() => calculateTaxIncludedPrice(1000, -0.1))
        .toThrow('세율은 0 이상 1 이하여야 합니다');
      expect(() => calculateTaxIncludedPrice(1000, 1.1))
        .toThrow('세율은 0 이상 1 이하여야 합니다');
    });
  });

  describe('calculateTax', () => {
    test('세액 계산', () => {
      expect(calculateTax(1000, 0.1)).toBe(100);
      expect(calculateTax(150, 0.08)).toBe(12);
    });
  });
});
```

**인간 검토 체크포인트**:
- [ ] 사양의 요구사항을 모두 커버하는가
- [ ] 비정상 케이스 테스트가 적절한가
- [ ] 테스트 기댓값이 올바른가
- [ ] 추가해야 할 테스트 케이스는 없는가

### 단계 4: Red-Green-Refactor-Validation 사이클

#### 4.1 Red (테스트 실패)

테스트를 실행하여 예상되는 실패를 확인합니다.

```bash
npm test
```

예상 출력:
```
FAIL  src/taxCalculator.test.ts
  ✕ calculateTaxIncludedPrice is not defined
  ✕ calculateTax is not defined
```

#### 4.2 Green (최소 구현)

AI에게 최소한의 구현을 요청합니다.

**AI에게 보낼 프롬프트 예시**:
```
다음 테스트 케이스를 통과하는 최소한의 구현을 작성해주세요:

[테스트 케이스 붙여넣기]

요구사항:
- 테스트 통과를 최우선으로 함
- 과도하게 복잡하게 만들지 않음
- 에러 핸들링을 적절히 구현
```

**생성된 구현 예시**:
```typescript
export function calculateTaxIncludedPrice(price: number, taxRate: number): number {
  validateInputs(price, taxRate);
  const tax = calculateTax(price, taxRate);
  return Math.round((price + tax) * 10) / 10;
}

export function calculateTax(price: number, taxRate: number): number {
  validateInputs(price, taxRate);
  return Math.round((price * taxRate) * 10) / 10;
}

function validateInputs(price: number, taxRate: number): void {
  if (price < 0) {
    throw new Error('가격은 0 이상이어야 합니다');
  }
  if (taxRate < 0 || taxRate > 1) {
    throw new Error('세율은 0 이상 1 이하여야 합니다');
  }
}
```

테스트 실행:
```bash
npm test
# 모든 테스트가 통과하는 것을 확인
```

#### 4.3 Refactor (리팩토링)

AI에게 코드 개선을 요청합니다.

**AI에게 보낼 프롬프트 예시**:
```
다음 코드를 리팩토링해주세요:

[구현 코드 붙여넣기]

개선점:
- 코드 가독성 향상
- 함수 책임 분리
- 성능 최적화
- TypeScript 타입 안전성 향상
```

#### 4.4 Validation (검증)

AI에게 구현의 타당성을 검증하게 합니다.

**AI에게 보낼 프롬프트 예시**:
```
다음 구현에 대해 포괄적으로 검증해주세요:

[리팩토링 후 코드 붙여넣기]
[테스트 케이스도 붙여넣기]

검증 관점:
- 사양 요구사항과의 일치성
- 코드 품질(가독성, 유지보수성)
- 테스트 커버리지의 타당성
- 잠재적인 문제점
- 성능상의 우려사항
```

### 단계 5: 최종 검토

**인간 검토 체크포인트**:

**기능면**:
- [ ] 모든 테스트가 통과함
- [ ] 사양 요구사항이 충족됨
- [ ] 에러 핸들링이 적절함

**코드 품질**:
- [ ] 가독성이 높음
- [ ] 적절한 함수 분리가 되어 있음
- [ ] 네이밍 규칙을 따름
- [ ] TypeScript 타입 정의가 적절함

**유지보수성**:
- [ ] 확장하기 쉬운 구조
- [ ] 테스트가 유지보수하기 쉬움
- [ ] 문서화가 적절함

## 회고와 학습 포인트

### 성공 패턴

**프로세스 준수**:
- 각 단계를 건너뛰지 않고 실행하기
- 인간 검토를 확실히 수행하기
- AI 출력을 맹신하지 않기

**적절한 AI 활용**:
- 명확하고 구체적인 프롬프트 사용하기
- 충분한 컨텍스트 제공하기
- 기대하는 출력 형식 지정하기

### 흔한 실패 패턴과 대책

**실패 1: 모호한 프롬프트**
```
❌ 나쁜 예: "세금 계산 함수 만들어줘"
✅ 좋은 예: "상품 가격과 세율로부터 세금 포함 가격을 계산하는 함수를 다음 사양에 따라 작성해주세요: [상세 사양]"
```

**실패 2: 인간 검토 생략**
```
❌ 문제: AI 출력을 그대로 사용
✅ 대책: 반드시 사양과의 일치성 확인
```

**실패 3: 불충분한 테스트 설계**
```
❌ 문제: 정상 케이스만 테스트
✅ 대책: 경계값, 비정상 케이스를 포함한 포괄적 테스트
```

### 다음 단계를 위한 준비

이 첫 프로젝트에서 습득해야 할 감각:
- AI와의 협업 개발 리듬
- 품질 관리의 중요성
- 프롬프트 설계의 기초
- 검토 포인트의 이해

다음 장에서는 더 복잡한 CRUD 작업 구현을 통해 AITDD의 응용력을 기릅니다.

## 정리

첫 AITDD 프로젝트에서는 다음을 중시합니다:

1. **성공 경험 획득**: 소규모라도 완전한 프로세스 경험
2. **기본 습관 확립**: 각 단계의 중요성 이해
3. **AI 활용 감각**: 적절한 프롬프트 설계의 기초
4. **품질 의식 함양**: 인간 검토의 가치 실감

이러한 기반이 있어야 더 복잡한 프로젝트에서도 AITDD를 효과적으로 활용할 수 있습니다.