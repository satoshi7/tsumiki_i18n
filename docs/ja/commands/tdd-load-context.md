# TDD関連ファイル読み込み・コンテキスト準備

TDD開発に必要なファイルを効率的に読み込み、開発コンテキストを準備するタスクです。

## 実行タスク

以下のTaskツールによる並列読み込みを実行します：

```
1. 【読み込み】TDDメモファイルの確認
   - Readツール: `docs/implements/{{task_id}}/{feature_name}-memo.md`
   - 既存の開発履歴、フェーズ情報、検証結果を把握

2. 【読み込み】要件定義文書の確認  
   - Readツール: `docs/implements/{{task_id}}/{feature_name}-requirements.md`
   - 機能仕様、入出力、制約条件を把握

3. 【読み込み】テストケース定義の確認
   - Readツール: `docs/implements/{{task_id}}/{feature_name}-testcases.md` 
   - 予定テストケース、分類、期待値を把握

4. 【探索のみ】プロジェクト設計文書の特定
   - Globツール: `docs/spec/{feature_name}-requirements.md` の存在確認
   - Globツール: `docs/design/{feature_name}/` ディレクトリ内ファイルの特定
   - 見つかったファイルパスを記録（読み込みは実行せず）

5. 【探索のみ】プロジェクト構造・ライブラリファイルの特定
   - Globツール: `package.json` の存在確認
   - Globツール: 既存テストファイル構造の把握（`**/*test*.js`, `**/*spec*.js`等）
   - Grepツール: 類似機能の実装パターン調査（関連キーワード検索）
   - 見つかったファイルパスを記録（読み込みは実行せず）

6. 【探索のみ】タスク管理文書の特定
   - Globツール: `docs/tasks/{要件名}-tasks.md` の存在確認
   - 見つかったファイルパスを記録（読み込みは実行せず）
```

## 読み込み結果の整理

読み込み・探索完了後、以下の形式で情報を整理します：

### 📋 開発コンテキスト情報

```markdown
## TDD開発コンテキスト

### 🎯 現在のフェーズ・状況
- **対象機能**: {feature_name}
- **現在のTDDフェーズ**: [Requirements/TestCases/Red/Green/Refactor/Verify]
- **前回の完了フェーズ**: [前回完了したフェーズ]
- **今回の実行予定**: [実行すべき次のステップ]

### 📄 要件・仕様情報
- **機能概要**: [要件定義書から抽出した機能の概要]
- **入力仕様**: [入力パラメータの型・制約・範囲]
- **出力仕様**: [出力形式・構造・期待値]
- **制約条件**: [パフォーマンス・セキュリティ・技術制約]
- **参照EARS要件**: [REQ-XXX, NFR-XXX等の要件ID]

### 🔧 技術・実装情報
- **使用言語**: [JavaScript/TypeScript等]
- **テストフレームワーク**: [Jest/Mocha等]
- **関連ファイル**: [探索で見つかった関連ファイルパス一覧]
- **設計文書パス**: [見つかった設計文書のパス一覧]
- **類似実装パス**: [参考にできる既存実装のファイルパス]

### 📈 進捗・品質情報
- **全体タスク進捗**: [完了数]/[総数] ([%])
- **前回の検証結果**: [合格/不合格/未実施]
- **品質課題**: [セキュリティ・パフォーマンス課題]
- **改善要求事項**: [前回記録された改善点]

### ⚠️ 注意事項・制約
- **技術的制約**: [アーキテクチャ・互換性制約]
- **実装時の注意点**: [前回記録された重要な注意事項]
- **未解決課題**: [継続対応が必要な課題]
```

## 信頼性レベル判定

読み込んだ各情報について信頼性レベルを判定：

- 🟢 **青信号**: ファイルが存在し、詳細な情報が利用可能
- 🟡 **黄信号**: ファイルが存在するが情報が部分的
- 🔴 **赤信号**: ファイルが存在しない、または推測が必要

## 使用方法

各TDDコマンドの冒頭で以下のように使用：

```markdown
## 事前準備

開発コンテキストの準備を行います：

**Taskツール実行**: `/tdd-load-context` でTDD関連ファイルの読み込み・探索とコンテキスト準備を実行

読み込み完了後、準備されたコンテキスト情報を基に{現在のフェーズ}の作業を開始します。
```

## 効果

- **効率化**: メモ・要件・テストケースは読み込み、その他は探索のみで時間短縮
- **一貫性**: 全TDDフェーズで統一されたコンテキスト準備
- **品質向上**: 必要情報の読み込み漏れ防止
- **保守性**: ファイル読み込み・探索ロジックの一元管理
- **軽量化**: 関連ファイルは特定のみで、必要に応じて個別に読み込み可能

このタスクにより、TDD開発の各フェーズで必要な情報を効率的に準備できます。