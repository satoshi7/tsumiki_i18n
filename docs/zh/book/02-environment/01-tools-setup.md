# 2.1 必需工具和设置

本节解释实践AITDD所需的工具和环境设置步骤。AITDD不需要特殊工具，只需在现有开发环境中添加AI辅助工具即可开始。

## 必需工具列表

### 必备工具

#### 1. Claude Sonnet 4 + Claude Code
**角色**：主要AI开发辅助工具  
**用途**：代码生成、测试创建、重构、验证  
**访问方法**：通过Claude Code

#### 2. VS Code
**角色**：集成开发环境  
**用途**：代码编辑、调试、项目管理  
**特点**：可与Claude Code集成

#### 3. Git + GitHub
**角色**：版本控制  
**用途**：代码管理、历史跟踪、恢复  
**重要性**：AI未产生预期结果时的恢复手段

### 辅助工具

#### Gemini（可选）
**角色**：研究和信息收集AI  
**用途**：库研究、技术信息收集  
**特点**：利用长上下文进行大规模信息处理

## 设置步骤

### 步骤1：Claude Pro计划订阅

1. **创建Claude账户**
   - 访问 https://claude.ai
   - 创建账户

2. **升级到Pro计划**
   - 订阅每月$20的Pro计划
   - 可设置最高$200的限制
   - 避免无限制的API成本

3. **启用Claude Code**
   - Pro计划可访问
   - 开发用途可自由使用

### 步骤2：VS Code设置

1. **安装VS Code**
   ```bash
   # Windows
   winget install Microsoft.VisualStudioCode

   # macOS
   brew install --cask visual-studio-code

   # Linux
   sudo apt install code
   ```

2. **安装基本扩展**
   - Git Graph（Git操作可视化）
   - GitLens（增强Git信息显示）
   - 语言特定扩展（JavaScript、Python等）

3. **配置Claude Code集成**
   - VS Code插件或Claude Code配置
   - 项目目录集成设置

### 步骤3：Git环境设置

1. **安装和配置Git**
   ```bash
   # 基本配置
   git config --global user.name "Your Name"
   git config --global user.email "your.email@example.com"
   
   # 默认分支设置
   git config --global init.defaultBranch main
   ```

2. **准备GitHub账户**
   - 创建GitHub账户
   - 设置SSH密钥或个人访问令牌
   - 准备创建仓库

3. **AITDD分支策略**
   ```bash
   # 基本工作流
   git checkout -b feature/new-functionality
   # 实践AITDD
   git add .
   git commit -m "Implement feature with AITDD"
   git push origin feature/new-functionality
   ```

## AI工具比较和选择标准

### 选择Claude Sonnet 4的原因

在实践AITDD时，我们解释在众多可用AI工具中选择Claude Sonnet 4作为主要工具的原因。

#### 基于综合评估的选择

**主要考虑因素：**
1. **成本效率**：由于AITDD涉及频繁试验，合理的成本水平是必需的
2. **编码性能**：优先考虑稳定性能而非峰值性能
3. **可访问性**：限制较少的计划可自由使用
4. **集成性**：与开发环境的协作和工作流一致性

**Claude Sonnet 4的优势：**
- **Claude Code集成**：通过VS Code插件紧密集成
- **Pro计划**：每月$20，可设置$200限制（避免无限制API成本）
- **AITDD适用性**：针对以试验为重点的开发风格进行优化
- **整体平衡**：性能、成本和可用性的最佳平衡

#### 与其他工具的比较结果

**评估的AI工具：**
- ChatGPT：性能高但有成本担忧  
- GitHub Copilot：专注于代码补全，对完整AITDD不够  
- 其他AI工具：试用后，整体上收敛到Claude Sonnet 4

**收敛原因：**
```
项目               Claude Sonnet 4    其他工具
──────────────────────────────────────────
成本效率           ◎                △
编码性能           ○                ◎  
可访问性           ◎                △
集成性             ◎                ○
AITDD适用性        ◎                △
──────────────────────────────────────────
整体评估           最优              有问题
```

### 与Gemini的使用策略

以Claude Sonnet 4为主要工具，在特定用途下辅助使用Gemini。

#### 使用分工的基本策略

**Claude Sonnet 4（主要工具）：**
- 所有实现阶段（设计→测试→实现→重构→验证）
- 整个AITDD流程的一致执行
- 代码生成和质量检查并重

**Gemini（辅助工具）：**
- 技术研究和信息收集
- 利用长上下文的大规模信息处理
- 必需库的研究
- 需要大量调研的任务

#### 具体协作模式

```
研究阶段：
Gemini → 技术信息收集 → 向Claude Sonnet 4提供信息

实现阶段：
Claude Sonnet 4 → 一致的AITDD流程执行
```

**协作示例：**
1. **新库研究**：用Gemini收集信息
2. **研究结果整合**：向Claude Sonnet 4提供研究结果
3. **实现执行**：用Claude Sonnet 4执行AITDD流程

### 回退策略

我们解释当AI不产生预期结果时的处理方法。

#### 基本回退步骤

**步骤1：状态恢复**
```bash
# 回到之前状态
git reset --hard HEAD~1
# 或回到特定提交
git reset --hard <commit-hash>
```

**步骤2：提示调整**
- 澄清和详细说明指令
- 添加上下文信息
- 明确指定约束条件

**步骤3：重新执行**
- 用同一工具（Claude Sonnet 4）重试
- 不切换到不同工具
- 保持一致性

#### 回退决策标准

**何时执行git reset：**
- 最终代码与预期显著偏离时
- 判断重写比修正请求更快时
- 多次修正尝试未见改善时

**提示调整指南：**
```
# 改进前（模糊）
"修复这段代码"

# 改进后（具体）
"修复这段代码中的以下问题：
1. 验证错误未得到正确处理
2. 返回值类型与规范不符
3. 边界情况测试不足"
```

#### 回退策略特点

**简单性：**
- 避免复杂决策逻辑
- 优先快速恢复

**一致性：**
- 用同一工具重试的基本方法
- 避免工具切换造成的混乱

**学习性：**
- 通过重复提高直觉
- 积累经验改善决策标准

### 新AI工具的评估方法

我们也制定新AI工具的评估方法以持续改进。

#### 评估流程

**信息收集阶段：**
1. **持续检查**：持续检查新AI工具信息
2. **趋势确认**：确认是否有持续关注，而非临时炒作
3. **社区反应**：确认开发者社区中的评价

**试验决策标准：**
- **持续性**：话题是否持续了几个月？
- **实用性**：能否应用于AITDD工作流？
- **成本效率**：与当前工具配置相比是否有优势？

**谨慎方法：**
- 不立即跳入，进行充分的信息收集
- 在维持当前稳定工作流的同时进行评估
- 只有确认明确优势时才考虑迁移

## 推荐技术栈

### 编程语言

#### 推荐语言
**JavaScript/TypeScript**
- 包管理：npm/yarn
- 透明性：通过package.json可视化依赖关系
- AI支持：可进行动态库研究

**Python**
- 包管理：pip/poetry
- 透明性：通过requirements.txt可视化依赖关系
- AI支持：丰富的库信息可供AI使用

#### 需要注意的语言
**Java/C#等编译型语言**
- 原因：通过jar或dll的二进制分发使AI难以动态调查依赖关系
- 对应：可使用但需要准备和人工辅助

### 项目类型

#### 最适合的项目
- **以CRUD为中心的应用程序**
- **Web API开发**
- **数据库集成应用程序**
- **相对大规模的项目**

#### 有效的代码模式
- 创建大量相似代码的场景
- 易于模板化的处理
- 标准设计模式实现

## 成本管理

### 预期成本
- **Claude Pro**：$20/月
- **GitHub**：个人使用免费，团队使用$4/用户/月
- **VS Code**：免费
- **其他**：项目特定依赖成本

### 成本优化要点
1. **Claude Pro限制设置**：设置最大$200
2. **高效使用**：通过明确目标设置优化AI使用量
3. **Git历史管理**：适当提交策略避免无意义的试错

## 设置完成确认

检查以下项目确认设置完成：

- [ ] Claude Pro计划已启用
- [ ] 可访问Claude Code
- [ ] VS Code已安装
- [ ] 基本VS Code扩展已安装
- [ ] Git已配置
- [ ] GitHub账户已准备
- [ ] 项目目录已创建
- [ ] 所选技术栈的基本环境已准备

## 故障排除

### 常见问题和解决方案

**无法访问Claude Code**
- 确认Pro计划有效性
- 清除浏览器缓存
- 检查网络连接

**VS Code集成问题**
- 重新安装Claude Code插件
- 重启VS Code
- 检查配置文件

**Git操作错误**
- 重置认证凭据
- 检查远程仓库URL
- 验证访问权限

## 下一步

工具设置完成后，在下一章"2.2 Claude Sonnet 4的使用方法"中学习AI工具的具体使用方法。通过掌握有效的提示设计和AI协作技术，您将能够发挥AITDD的真正价值。